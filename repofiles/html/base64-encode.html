<!DOCTYPE html>
<html>
<head>
<title>Base64 Encoder</title>
<style>
body { font-family: sans-serif; }
#progress-bar { width: 0%; height: 20px; background-color: #4CAF50; transition: width 0.1s ease-in-out; }
#progress-bar-container { width: 300px; border: 1px solid #ddd; }
</style>
</head>
<body>

<h1>Base64 Encoder</h1>

<input type="file" id="fileInput">
<br><br>

<div id="progress-bar-container">
  <div id="progress-bar"></div>
</div>
<div id="progress-percent">0.0000%</div>


<textarea id="base64Output" readonly rows="10" cols="80"></textarea>
<button id="copyButton">Copy to Clipboard</button>

<script>
const fileInput = document.getElementById('fileInput');
const base64Output = document.getElementById('base64Output');
const progressBar = document.getElementById('progress-bar');
const progressPercent = document.getElementById('progress-percent');
const copyButton = document.getElementById('copyButton');

fileInput.addEventListener('change', async (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = async (e) => {
    const data = e.target.result;
    let encoded = '';
    let progress = 0;
    const totalBytes = data.length;

    for (let i = 0; i < totalBytes; i++) {
      encoded += data.charCodeAt(i).toString(16).padStart(2, '0');
      progress = (i + 1) / totalBytes * 100;
      progressBar.style.width = progress + '%';
      progressPercent.textContent = progress.toFixed(4) + '%';
      await new Promise(resolve => setTimeout(resolve, 0)); //Simulate slow encoding
    }

    base64Output.value = btoa(encoded); //Encode as Base64
  };
  reader.readAsBinaryString(file); //Read file as binary string for better handling of various characters.
});

copyButton.addEventListener('click', () => {
  base64Output.select();
  document.execCommand('copy');
});
</script>

</body>
</html>
